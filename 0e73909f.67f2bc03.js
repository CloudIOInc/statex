(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{131:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return I})),a.d(t,"metadata",(function(){return N})),a.d(t,"rightToc",(function(){return V})),a.d(t,"default",(function(){return A}));var n=a(2),r=a(6),o=a(0),i=a.n(o),c=a(134),s=(a(12),a(306)),l=(a(184),a(139)),u=a(313),d=a(198);function b({children:e,moveItem:t,i:a,className:n,left:r,top:c,onDragEnd:s,onDragStart:u,dragging:b=!1}){const m=Object(l.useStateXRefValue)(["ui","canvas"]),f=Object(d.c)(0),g=Object(d.c)(0),p=Object(d.c)(0),h=Object(d.c)(0),[v,O]=Object(o.useState)(!1),[x,j]=Object(o.useState)(!1),[y,S]=Object(o.useState)(!0);return Object(o.useEffect)(()=>{if(!v&&!x){const e=setTimeout(()=>{S(!0)},20);return()=>clearTimeout(e)}S(!1)},[x,v]),Object(o.useEffect)(()=>{y&&(f.set(r,!0),g.set(c,!0))},[y,r,c,f,g]),i.a.createElement(d.b.div,{key:a,className:n,animate:y?{x:r,y:c}:void 0,style:{x:f,y:g,zIndex:y?void 0:10},drag:!0,dragOriginY:h,dragOriginX:p,dragConstraints:m&&null!==m.current?m:void 0,onAnimationStart:()=>{j(!0)},onAnimationComplete:()=>{j(!1),s(a,{x:f.get(),y:g.get()})},dragMomentum:!0,onDragStart:()=>{O(!0),u(a,{x:f.get(),y:g.get()})},onDragEnd:(e,t)=>{O(!1)},dragElastic:!1,onDrag:(e,{point:n})=>t(a,n)},e)}var m=a(136),f=a(318);const g=Object(l.atom)({path:["settings","boxSize"],defaultValue:60,updater:({value:e})=>Math.min(Math.max(30,e),100)});function p(){const[e,t]=Object(l.useStateX)(g);return i.a.createElement(f.a,{value:e,onChange:(e,a)=>t(a),"aria-labelledby":"discrete-slider-restrict",valueLabelDisplay:"auto",step:10,marks:!0,min:30,max:100})}var h=Object(u.a)({root:function(e){var t=e.boxSize;return{background:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)",border:0,borderRadius:3,boxShadow:"0 3px 5px 2px rgba(255, 105, 135, .3)",color:"white",height:t-10,width:t-10,padding:0,margin:5,position:"absolute",display:"inline-block",userSelect:"none"}},dragging:{background:"linear-gradient(45deg, #FE1B8B 10%, #FF1E53 90%)",zIndex:9999}});function v(e,t){if(t<4)return e;var a=e%t;return a>=t/2?e+a+(t-a):e-a}function O(e,t,a,n){var r=null==e?void 0:e.current;if(!r)return t;var o=r.scrollTop,i=r.scrollLeft,c=r.offsetHeight,s=r.offsetWidth;return Object.assign({},t,{left:v(Math.max(0,Math.min(s+i-n-20,a.x)),0),top:v(Math.max(0,Math.min(c+o-n-20,a.y)),0)})}var x=Object(o.memo)((function(e){var t=e.item,a=Object(l.useStateXValue)(g),r=h({boxSize:a}),c=Object(l.useStateXRefValue)(["ui","canvas"]),s=Object(l.useStateX)(["root","items",t.id],t),u=s[0],d=s[1];if(!u)throw Error("Missing item!");var f=Object(l.useStateXValueSetter)(["root","dragItem"]),p=Object(o.useCallback)((function(e,t){if(c){var n=d((function(e){return O(c,e,t,a)}));n&&f(n)}}),[a,c,f,d]),v=Object(o.useCallback)((function(e,t){if(c){var n=d((function(e){return Object.assign({},O(c,e,t,a),{dragging:!0})}));n&&f(n)}}),[a,c,f,d]),x=Object(o.useCallback)((function(e,t){if(c){var n=d((function(e){return Object.assign({},O(c,e,t,a),{dragging:!1})}));n&&f(n)}}),[a,c,f,d]);return i.a.createElement(b,Object(n.a)({onDragStart:v,onDragEnd:x,setPosition:function(e,t){},moveItem:p,className:Object(m.a)(r.root,u.dragging?r.dragging:null),i:u.id},u))}));x.displayName="Box";var j=x;const y=Object(u.a)({root:{background:"#000",border:0,borderRadius:3,boxShadow:"0 3px 5px 2px rgba(255, 105, 135, .3)",color:"white",height:"auto",width:160,padding:12,margin:0,position:"absolute",display:"inline-block",userSelect:"none",zIndex:9999,top:8,right:8},pre:{background:"#000",color:"#fff"}});function S(){const e=Object(l.useStateXValue)(["root","items"],{}),t=y(),a=Object.values(e).filter(e=>e.dragging);return a.length?i.a.createElement("div",{className:t.root,style:{top:window.document.documentElement.scrollTop}},a.length," moving",i.a.createElement("pre",{className:t.pre},a.map(e=>`${Math.round(e.left)} X ${Math.round(e.top)}`).join("\n"))):null}var E=a(316);const k=Object(s.a)({root:{display:"flex",flex:1,overflow:"hidden",position:"absolute",top:0,bottom:0,left:0,right:0},canvas:{display:"flex",flex:1,overflow:"hidden",position:"absolute",top:0,bottom:0,left:0,right:0}});function w(){const e=Object(l.useStateXValue)(g),t=k(),a=Object(l.useStateXRef)(["ui","canvas"]),n=Object(l.useStateXValueGetterWithPath)(),[r,c]=Object(l.useStateX)(["root","items"],{},{shouldComponentUpdate:(e,t={})=>Object.keys(e).length!==Object.keys(t).length}),s=Object.keys(r).length;if(Object(o.useEffect)(()=>{if(!a.current)return;const t=function(e,t){return Math.floor(Math.floor((e.offsetHeight-20)/t)*Math.floor((e.offsetWidth-20)/t))}(a.current,e);if(s===t)return;const n=a.current.offsetWidth,r={},o=Math.floor(n/e);Array.from(Array(t).keys()).forEach(t=>{const a=t%o,n=Math.floor(t/o),i={id:t+"-"+Object(E.a)(),left:a*e,top:n*e};r[i.id]=i}),c(r)},[e,a,s,c]),!r)throw Error("Missing items!!!");return a?i.a.createElement("div",{onDoubleClick:()=>{const e=["root","items",r[Object.keys(r)[10]].id],t=n(e),a=n(["root","items"]);t&&c({...a,[t.id]:{...t,left:0}})},className:t.root},i.a.createElement(S,null),i.a.createElement("div",{className:t.canvas,ref:a},Object.keys(r).map(e=>{const t=r[e];return i.a.createElement(j,{key:t.id,item:t})}))):null}var M=a(35),X=a(168),C=a(307);const D={width:"100%",height:"600px",position:"relative",overflow:"hidden"};function T(){return M.a.canUseDOM?i.a.createElement(l.StateXProvider,null,i.a.createElement(C.a,{theme:X.a},i.a.createElement(p,null),i.a.createElement("div",{style:D},i.a.createElement(w,null)))):null}var I={id:"canvas",title:"Canvas"},N={id:"examples/canvas",title:"Canvas",description:"Some random boxes are rendered below. While dragging, only the dragged boxes get's re-rendered.",source:"@site/docs/examples/canvas.md",permalink:"/statex/docs/examples/canvas",editUrl:"https://github.com/CloudIOInc/statex/edit/master/website/docs/examples/canvas.md",sidebar:"someSidebar",previous:{title:"Performance",permalink:"/statex/docs/examples/performance"},next:{title:"Master Detail",permalink:"/statex/docs/examples/master-detail"}},V=[],z={rightToc:V};function A(e){var t=e.components,a=Object(r.a)(e,["components"]);return Object(c.b)("wrapper",Object(n.a)({},z,a,{components:t,mdxType:"MDXLayout"}),Object(c.b)("p",null,"Some random boxes are rendered below. While dragging, only the dragged boxes get's re-rendered."),Object(c.b)(T,{mdxType:"App"}),Object(c.b)("p",null,Object(c.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/CloudIOInc/statex/blob/master/website/src/components/canvas/App.tsx"}),"View this code on github")))}A.isMDXComponent=!0},168:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(264);const r=Object(n.a)({palette:{primary:{light:"rgba(239, 103, 13, 0.65)",main:"#ef670d",dark:"#ef670d",contrastText:"#fff"},secondary:{light:"rgba(239, 103, 13, 0.65)",main:"#ef670d",dark:"#ef670d",contrastText:"#fff"}},overrides:{MuiButton:{root:{textTransform:"none"}},MuiTab:{root:{textTransform:"none"}}}})}}]);