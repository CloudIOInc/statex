(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{87:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return l})),n.d(t,"metadata",(function(){return i})),n.d(t,"rightToc",(function(){return u})),n.d(t,"default",(function(){return b}));var a=n(2),o=n(6),r=(n(0),n(94)),c=n(247),s=n(248),l={id:"getting-started",title:"Getting Started"},i={id:"introduction/getting-started",isDocsHomePage:!0,title:"Getting Started",description:"Create React App",source:"@site/docs/introduction/getting-started.md",permalink:"/statex/docs/",editUrl:"https://github.com/CloudIOInc/statex/edit/master/website/docs/introduction/getting-started.md",sidebar:"someSidebar",next:{title:"Core Concepts",permalink:"/statex/docs/introduction/core-concepts"}},u=[{value:"Create React App",id:"create-react-app",children:[]},{value:"Installation",id:"installation",children:[]},{value:"Provider",id:"provider",children:[]},{value:"Atom",id:"atom",children:[]},{value:"Selector",id:"selector",children:[]},{value:"Demo",id:"demo",children:[]}],p={rightToc:u};function b(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(r.b)("wrapper",Object(a.a)({},p,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)("h2",{id:"create-react-app"},"Create React App"),Object(r.b)("p",null,"StateX is a state management library for React, so you need to have React installed and running to use StateX. The easiest and recommended way for bootstrapping a React application is to use ",Object(r.b)("a",{href:"https://github.com/facebook/create-react-app#creating-an-app",target:"_blank"},"Create React App")),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-shell"}),"npx create-react-app my-statex\n")),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},Object(r.b)("inlineCode",{parentName:"p"},"npx")," is a package runner tool that comes with npm 5.2+ and higher.")),Object(r.b)("p",null,"For more ways to install Create React App, see the ",Object(r.b)("a",{href:"https://github.com/facebook/create-react-app#creating-an-app",target:"_blank"},"official documentation"),"."),Object(r.b)("h2",{id:"installation"},"Installation"),Object(r.b)("p",null,"The StateX package lives in ",Object(r.b)("a",{href:"https://www.npmjs.com/get-npm",target:"_blank"},"npm"),". To install the latest stable version, run the following command:"),Object(r.b)(c.a,{defaultValue:"yarn",values:[{label:"Yarn",value:"yarn"},{label:"NPM",value:"npm"}],mdxType:"Tabs"},Object(r.b)(s.a,{value:"yarn",mdxType:"TabItem"},Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-bash",metastring:"{1}","{1}":!0}),"yarn add @cloudio/statex\n"))),Object(r.b)(s.a,{value:"npm",mdxType:"TabItem"},"```bash ",1,"npm install --save @cloudio/statex ```")),Object(r.b)("h2",{id:"provider"},"Provider"),Object(r.b)("p",null,"Components that use atom state need ",Object(r.b)("strong",{parentName:"p"},"StateXProvider")," to appear somewhere in the parent tree. A good place to put this is in your root component:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx",metastring:"{6,8}","{6,8}":!0}),"import React from 'react';\nimport { StateXProvider } from '@cloudio/statex';\n\nfunction App() {\n  return (\n    <StateXProvider>\n      <CharacterCounter />\n    </StateXProvider>\n  );\n}\n")),Object(r.b)("p",null,"We'll implement the ",Object(r.b)("inlineCode",{parentName:"p"},"CharacterCounter")," component in the following section."),Object(r.b)("h2",{id:"atom"},"Atom"),Object(r.b)("p",null,"An ",Object(r.b)("strong",{parentName:"p"},"atom")," represents a node in the global ",Object(r.b)("strong",{parentName:"p"},"state")," tree. Atoms can be read from and written to from any component. Components that read the value of an atom are implicitly ",Object(r.b)("strong",{parentName:"p"},"subscribed")," to that atom, so any atom updates will result in a re-render of all components subscribed to that atom:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript"}),"const textAtom = atom({\n  // unique path in the state tree\n  path: ['mystate', 'text'],\n  defaultValue: '', // initial value\n});\n")),Object(r.b)("p",null,"Components that need to read from ",Object(r.b)("em",{parentName:"p"},"and")," write to an atom should use ",Object(r.b)("inlineCode",{parentName:"p"},"useStateX()")," as shown below:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"function CharacterCounter() {\n  return (\n    <div>\n      <TextInput />\n      <CharacterCount />\n    </div>\n  );\n}\n\nfunction TextInput() {\n  const [text, setText] = useStateX(textAtom);\n\n  const onChange = (event) => {\n    setText(event.target.value);\n  };\n\n  return (\n    <div>\n      <input value={text} onChange={onChange} />\n      <br />\n      Echo: {text}\n    </div>\n  );\n}\n")),Object(r.b)("h2",{id:"selector"},"Selector"),Object(r.b)("p",null,"A ",Object(r.b)("strong",{parentName:"p"},"selector")," represents a piece of ",Object(r.b)("strong",{parentName:"p"},"derived atom"),". Derived atom is a ",Object(r.b)("strong",{parentName:"p"},"transformation")," of one or more atoms. You can think of derived atom as the output of passing atom to a pure function that modifies the given atom in some way:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"const charCountSelector = selector({\n  path: ['mystate', 'charCount'], // unique path\n  get: ({ get }) => {\n    const text = get(textAtom);\n\n    return text.length;\n  },\n});\n")),Object(r.b)("p",null,"We can use the ",Object(r.b)("inlineCode",{parentName:"p"},"useStateXValue()")," hook to read the value of ",Object(r.b)("inlineCode",{parentName:"p"},"charCountSelector"),":"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"function CharacterCount() {\n  const count = useStateXValue(charCountSelector);\n\n  return <>Character Count: {count}</>;\n}\n")),Object(r.b)("p",null,"We can use also use just the path, without having to define an atom, to read or write the state at any node in the tree. Below, is an example where we read the root JSON object at the root atom which has a nested atom 'mystate' which intern has 'text' & 'charCount'"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"function JSONPayload() {\n  const json = useStateXValue(['mystate'], {});\n\n  return <pre>{JSON.stringify(json, null, '  ')}</pre>;\n}\n")),Object(r.b)("h2",{id:"demo"},"Demo"),Object(r.b)("p",null,"Below is the finished product:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx",metastring:"live",live:!0}),"const textAtom = atom({\n  path: ['mystate', 'text'],\n  defaultValue: '',\n});\n\nconst charCountSelector = selector({\n  path: ['mystate', 'charCount'],\n  defaultValue: 0,\n  get: ({ get }) => {\n    const text = get(textAtom);\n\n    return text.length;\n  },\n});\n\nfunction CharacterCounter() {\n  return (\n    <>\n      <TextInput />\n      <CharacterCount />\n      <JSONPayload />\n    </>\n  );\n}\n\nfunction CharacterCount() {\n  const count = useStateXValue(charCountSelector);\n\n  return <>Character Count: {count}</>;\n}\n\nfunction JSONPayload() {\n  const json = useStateXValue([], {});\n\n  return (\n    <>\n      <pre>{JSON.stringify(json, null, '  ')}</pre>\n    </>\n  );\n}\n\nfunction TextInput() {\n  const [text, setText] = useStateX(textAtom);\n\n  const onChange = (event) => {\n    setText(event.target.value);\n  };\n\n  return (\n    <div>\n      <input value={text} onChange={onChange} />\n      <br />\n      Echo: {text}\n    </div>\n  );\n}\n\nreturn <CharacterCounter />;\n")))}b.isMDXComponent=!0}}]);