(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{130:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return N})),a.d(t,"metadata",(function(){return V})),a.d(t,"rightToc",(function(){return z})),a.d(t,"default",(function(){return B}));var n=a(2),o=a(6),r=a(0),i=a.n(r),s=a(134),c=(a(12),a(305)),l=a(138),d=a(312),u=a(196);function m({children:e,moveItem:t,i:a,className:n,left:o,top:s,onDragEnd:c,onDragStart:d,dragging:m=!1}){const b=Object(l.useStateXRefValue)(["ui","canvas"]),g=Object(u.c)(0),f=Object(u.c)(0),p=Object(u.c)(0),h=Object(u.c)(0),[x,O]=Object(r.useState)(!1),[j,v]=Object(r.useState)(!1),[y,S]=Object(r.useState)(!0);return Object(r.useEffect)(()=>{if(!x&&!j){const e=setTimeout(()=>{S(!0)},20);return()=>clearTimeout(e)}S(!1)},[j,x]),Object(r.useEffect)(()=>{y&&(g.set(o,!0),f.set(s,!0))},[y,o,s,g,f]),i.a.createElement(u.b.div,{key:a,className:n,animate:y?{x:o,y:s}:void 0,style:{x:g,y:f,zIndex:y?void 0:10},drag:!0,dragOriginY:h,dragOriginX:p,dragConstraints:b&&null!==b.current?b:void 0,onAnimationStart:()=>{v(!0)},onAnimationComplete:()=>{v(!1),c(a,{x:g.get(),y:f.get()})},dragMomentum:!0,onDragStart:()=>{O(!0),d(a,{x:g.get(),y:f.get()})},onDragEnd:(e,t)=>{O(!1)},dragElastic:!1,onDrag:(e,{point:n})=>t(a,n)},e)}var b=a(140),g=a.n(b),f=a(317);const p=Object(l.atom)({path:["settings","boxSize"],defaultValue:60,updater:({value:e})=>Math.min(Math.max(30,e),100)});function h(){const[e,t]=Object(l.useStateX)(p);return i.a.createElement(f.a,{value:e,onChange:(e,a)=>t(a),"aria-labelledby":"discrete-slider-restrict",valueLabelDisplay:"auto",step:10,marks:!0,min:30,max:100})}const x=Object(d.a)({root:({boxSize:e})=>({background:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)",border:0,borderRadius:3,boxShadow:"0 3px 5px 2px rgba(255, 105, 135, .3)",color:"white",height:e-10,width:e-10,padding:0,margin:5,position:"absolute",display:"inline-block",userSelect:"none"}),dragging:{background:"linear-gradient(45deg, #FE1B8B 10%, #FF1E53 90%)",zIndex:9999}});function O(e,t){if(t<4)return e;const a=e%t;return a>=t/2?e+a+(t-a):e-a}function j(e,t,a,n){const o=null==e?void 0:e.current;if(!o)return t;const{scrollTop:r,scrollLeft:i,offsetHeight:s,offsetWidth:c}=o;return{...t,left:O(Math.max(0,Math.min(c+i-n-20,a.x)),0),top:O(Math.max(0,Math.min(s+r-n-20,a.y)),0)}}const v=Object(r.memo)(({item:e})=>{const t=Object(l.useStateXValue)(p),a=x({boxSize:t}),o=Object(l.useStateXRefValue)(["ui","canvas"]),[s,c]=Object(l.useStateX)(["root","items",e.id],e);if(!s)throw Error("Missing item!");const d=Object(l.useStateXValueSetter)(["root","dragItem"]),u=Object(r.useCallback)((e,a)=>{if(o){const e=c(e=>j(o,e,a,t));e&&d(e)}},[t,o,d,c]),b=Object(r.useCallback)((e,a)=>{if(o){const e=c(e=>({...j(o,e,a,t),dragging:!0}));e&&d(e)}},[t,o,d,c]),f=Object(r.useCallback)((e,a)=>{if(o){const e=c(e=>({...j(o,e,a,t),dragging:!1}));e&&d(e)}},[t,o,d,c]);return i.a.createElement(m,Object(n.a)({onDragStart:b,onDragEnd:f,setPosition:(e,t)=>{},moveItem:u,className:g()(a.root,s.dragging?a.dragging:null),i:s.id},s))});v.displayName="Box";var y=v;const S=Object(d.a)({root:{background:"#000",border:0,borderRadius:3,boxShadow:"0 3px 5px 2px rgba(255, 105, 135, .3)",color:"white",height:"auto",width:160,padding:12,margin:0,position:"absolute",display:"inline-block",userSelect:"none",zIndex:9999,top:8,right:8},pre:{background:"#000",color:"#fff"}});function E(){const e=Object(l.useStateXValue)(["root","items"],{}),t=S(),a=Object.values(e).filter(e=>e.dragging);return a.length?i.a.createElement("div",{className:t.root,style:{top:window.document.documentElement.scrollTop}},a.length," moving",i.a.createElement("pre",{className:t.pre},a.map(e=>`${Math.round(e.left)} X ${Math.round(e.top)}`).join("\n"))):null}var k=a(315);const w=Object(c.a)({root:{display:"flex",flex:1,overflow:"hidden",position:"absolute",top:0,bottom:0,left:0,right:0},canvas:{display:"flex",flex:1,overflow:"hidden",position:"absolute",top:0,bottom:0,left:0,right:0}});function M(){const e=Object(l.useStateXValue)(p),t=w(),a=Object(l.useStateXRef)(["ui","canvas"]),n=Object(l.useStateXValueGetterWithPath)(),[o,s]=Object(l.useStateX)(["root","items"],{},{shouldComponentUpdate:(e,t={})=>Object.keys(e).length!==Object.keys(t).length}),c=Object.keys(o).length;if(Object(r.useEffect)(()=>{if(!a.current)return;const t=function(e,t){return Math.floor(Math.floor((e.offsetHeight-20)/t)*Math.floor((e.offsetWidth-20)/t))}(a.current,e);if(c===t)return;const n=a.current.offsetWidth,o={},r=Math.floor(n/e);Array.from(Array(t).keys()).forEach(t=>{const a=t%r,n=Math.floor(t/r),i={id:t+"-"+Object(k.a)(),left:a*e,top:n*e};o[i.id]=i}),s(o)},[e,a,c,s]),!o)throw Error("Missing items!!!");return a?i.a.createElement("div",{onDoubleClick:()=>{const e=["root","items",o[Object.keys(o)[10]].id],t=n(e),a=n(["root","items"]);t&&s({...a,[t.id]:{...t,left:0}})},className:t.root},i.a.createElement(E,null),i.a.createElement("div",{className:t.canvas,ref:a},Object.keys(o).map(e=>{const t=o[e];return i.a.createElement(y,{key:t.id,item:t})}))):null}var X=a(35),C=a(167),D=a(306);const T={width:"100%",height:"600px",position:"relative",overflow:"hidden"};function I(){return X.a.canUseDOM?i.a.createElement(l.StateXProvider,null,i.a.createElement(D.a,{theme:C.a},i.a.createElement(h,null),i.a.createElement("div",{style:T},i.a.createElement(M,null)))):null}var N={id:"canvas",title:"Canvas"},V={id:"examples/canvas",title:"Canvas",description:"Some random boxes are rendered below. While dragging, only the dragged boxes get's re-rendered.",source:"@site/docs/examples/canvas.md",permalink:"/statex/docs/examples/canvas",editUrl:"https://github.com/CloudIOInc/statex/edit/master/website/docs/examples/canvas.md",sidebar:"someSidebar",previous:{title:"Performance",permalink:"/statex/docs/examples/performance"},next:{title:"Master Detail",permalink:"/statex/docs/examples/master-detail"}},z=[],A={rightToc:z};function B(e){var t=e.components,a=Object(o.a)(e,["components"]);return Object(s.b)("wrapper",Object(n.a)({},A,a,{components:t,mdxType:"MDXLayout"}),Object(s.b)("p",null,"Some random boxes are rendered below. While dragging, only the dragged boxes get's re-rendered."),Object(s.b)(I,{mdxType:"App"}),Object(s.b)("p",null,Object(s.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/CloudIOInc/statex/blob/master/website/src/components/canvas/App.tsx"}),"View this code on github")))}B.isMDXComponent=!0},167:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(263);const o=Object(n.a)({palette:{primary:{light:"rgba(239, 103, 13, 0.65)",main:"#ef670d",dark:"#ef670d",contrastText:"#fff"},secondary:{light:"rgba(239, 103, 13, 0.65)",main:"#ef670d",dark:"#ef670d",contrastText:"#fff"}},overrides:{MuiButton:{root:{textTransform:"none"}},MuiTab:{root:{textTransform:"none"}}}})}}]);