(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{164:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return c})),a.d(t,"metadata",(function(){return l})),a.d(t,"rightToc",(function(){return i})),a.d(t,"default",(function(){return u}));var n=a(2),r=a(9),o=(a(0),a(172)),c={title:"useStateXCallback()"},l={id:"api-reference/core/useStateXCallback",title:"useStateXCallback()",description:"This hook is similar to useCallback(), but will also provide an API for your callbacks to work with StateX state. This hook can be used to construct a callback that has access to the StateX state and the ability to update the StateX state.",source:"@site/docs/api-reference/core/useStateXCallback.md",permalink:"/statex/docs/api-reference/core/useStateXCallback",editUrl:"https://github.com/CloudIOInc/statex/edit/master/website/docs/api-reference/core/useStateXCallback.md",sidebar:"someSidebar",previous:{title:"useRemoveStateX()",permalink:"/statex/docs/api-reference/core/useRemoveStateX"},next:{title:"Resolveable",permalink:"/statex/docs/api-reference/core/useStateXValueResolveable"}},i=[{value:"Example",id:"example",children:[]},{value:"Demo",id:"demo",children:[]}],s={rightToc:i};function u(e){var t=e.components,a=Object(r.a)(e,["components"]);return Object(o.b)("wrapper",Object(n.a)({},s,a,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"This hook is similar to ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://reactjs.org/docs/hooks-reference.html#usecallback"}),Object(o.b)("em",{parentName:"a"},Object(o.b)("inlineCode",{parentName:"em"},"useCallback()"))),", but will also provide an API for your callbacks to work with StateX state. This hook can be used to construct a callback that has access to the StateX state and the ability to update the StateX state."),Object(o.b)("p",null,"Some motivations for using this hook may include:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Asynchronously read StateX state without subscribing a React component to re-render if the atom or selector is updated."),Object(o.b)("li",{parentName:"ul"},"Defering expensive lookups to an async action that you don't want to do at render-time."),Object(o.b)("li",{parentName:"ul"},"Dynamically updating an atom or selector where we may not know at render-time which atom or selector we will want to update.")),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-jsx"}),"function useStateXCallback<P extends ReadonlyArray<unknown>, R>(\n  fn: (props: { set: StateXSetter; get: StateXGetter }, ...args: P) => R,\n  deps: DependencyList,\n): (...args: P) => R;\n")),Object(o.b)("h3",{id:"example"},"Example"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-javascript"}),"const callback = useStateXCallback(({ get }, param1, param2) => {\n  set(atom, 1);\n  const value = get(atom);\n  console.log(value + param1 + param2); // 3\n}, []);\n\ncallback(1, 1);\n")),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},Object(o.b)("inlineCode",{parentName:"strong"},"fn"))," - The user callback function with access to set & set to read and/or write to global state"),Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},Object(o.b)("inlineCode",{parentName:"strong"},"deps"))," - An optional set of dependencies for memoizing the callback. Like ",Object(o.b)("inlineCode",{parentName:"li"},"useCallback()"),", the produced callback will not be memoized by default and will produce a new function each time. You can pass an empty array to always return the same function instance. If you pass values in the ",Object(o.b)("inlineCode",{parentName:"li"},"deps")," array a new function will be used if the reference equality of any dep changes. Those values can then be used from within the body of your callback without getting stale. (See ",Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"https://reactjs.org/docs/hooks-reference.html#usecallback"}),Object(o.b)("inlineCode",{parentName:"a"},"useCallback")),")")),Object(o.b)("h3",{id:"demo"},"Demo"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-jsx",metastring:"live",live:!0}),"const itemsInCart = atom({\n  path: ['itemsInCart'],\n  defaultValue: 11,\n});\n\nfunction CartInfoDebug() {\n  const logCartItems = useStateXCallback(({ get }) => {\n    const numItemsInCart = get(itemsInCart);\n\n    console.log('Items in cart: ', numItemsInCart);\n  }, []);\n\n  return (\n    <div>\n      <button onClick={logCartItems}>Log Cart Items</button>\n    </div>\n  );\n}\n\nreturn <CartInfoDebug />;\n")))}u.isMDXComponent=!0},172:function(e,t,a){"use strict";a.d(t,"a",(function(){return b})),a.d(t,"b",(function(){return d}));var n=a(0),r=a.n(n);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=r.a.createContext({}),u=function(e){var t=r.a.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},b=function(e){var t=u(e.components);return r.a.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},m=r.a.forwardRef((function(e,t){var a=e.components,n=e.mdxType,o=e.originalType,c=e.parentName,s=i(e,["components","mdxType","originalType","parentName"]),b=u(a),m=n,d=b["".concat(c,".").concat(m)]||b[m]||p[m]||o;return a?r.a.createElement(d,l(l({ref:t},s),{},{components:a})):r.a.createElement(d,l({ref:t},s))}));function d(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=a.length,c=new Array(o);c[0]=m;var l={};for(var i in t)hasOwnProperty.call(t,i)&&(l[i]=t[i]);l.originalType=e,l.mdxType="string"==typeof e?e:n,c[1]=l;for(var s=2;s<o;s++)c[s]=a[s];return r.a.createElement.apply(null,c)}return r.a.createElement.apply(null,a)}m.displayName="MDXCreateElement"}}]);